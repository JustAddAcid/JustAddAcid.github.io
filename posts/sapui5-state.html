<!DOCTYPE html><html lang="ru"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Nosoff.info -- personal blog"/><title>Как запилить рективность на SAPUI5 -- часть 1</title><meta property="og:image" content="/assets/blog/sapui5-state/cover.jpg"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/b53dc93c726b8658a966.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b53dc93c726b8658a966.css"/><link rel="preload" href="/_next/static/css/660f735cfd0633f1a2b3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/660f735cfd0633f1a2b3.css"/><link rel="preload" href="/_next/static/css/c77a6c1079e98ec5fcc2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c77a6c1079e98ec5fcc2.css"/><link rel="preload" href="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/pages/posts/%5Bslug%5D.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f691431.e05b9cac0aab3e16d0b1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.34684228d50c6c140f9e.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-54bbc6f5114b2beb7db2.js" as="script"/><link rel="preload" href="/_next/static/chunks/a0bf25f28018c2b2be5f23c259f3c82d2e511923.a375015dfeaf3415b9d5.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">Nosoff.info</a></h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Как запилить рективность на SAPUI5 -- часть 1</h1><div class="hidden md:block md:mb-12"><div class="flex items-center"><img src="/assets/blog/authors/romannosov.png" class="w-12 h-12 rounded-full mr-4" alt="Roman A. Nosov"/><div class="text-xl font-bold">Roman A. Nosov</div></div></div><div class="mb-8 md:mb-16 -mx-5 sm:mx-0"><div class="-mx-5 sm:mx-0"><img src="/assets/blog/sapui5-state/cover.jpg" alt="Cover Image for Как запилить рективность на SAPUI5 -- часть 1" class="shadow-small"/></div></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div class="flex items-center"><img src="/assets/blog/authors/romannosov.png" class="w-12 h-12 rounded-full mr-4" alt="Roman A. Nosov"/><div class="text-xl font-bold">Roman A. Nosov</div></div></div><div class="mb-6 text-lg"><time dateTime="2020-06-15T14:15:07.322Z">June	15, 2020</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><p>Решил описать то, как можно удобно хранить состояния экранов (или всего приложения) внутри <em>SAPUI5</em> и делать реактивность (Почти как у больших и нормальных фреймворков).</p>
<p><strong>Для тех, кто в танке и никогда не слышал, что это такое:</strong> <em>SAPUI5</em> -- это фронтенд-фреймворк. Как  хипстерские <em>Vue</em> и <em>React</em>, только никому не нужен. Используется для быстрого написания фронтендов поверх выгрузки данных из SAP-ERP. </p>
<p>Внезапно, но он действительно неплохо интегрирован со всей сап-экосистемой и простенькие приложения (внутри опеределенных рамок) писать не сильно больно. Проблемы начинаются тогда, когда нужно сделать что-то <em>большее</em>, чем просто нарисовать табличку с двумя кнопками. И внезапно вылезают всеобщая громоздкость ситаксиса, нестабильность работы некоторых контролов и отсутствие нормального комьюнити.</p>
<p><img src="/assets/blog/sapui5-state/meme.png" alt="Learning programming sapui5"></p>
<h2>Стейты стейты стейты</h2>
<h3>Для начала немного теории</h3>
<p>Что такое реактивное программирование очень хорошо объяснено <a href="https://webdevblog.ru/ponimanie-reaktivnosti-vo-vue-js-shag-za-shagom/">(здесь)</a> только примеры для другого фреймворка. Но это не важно! :)</p>
<p>В основе лежит идея о том, что было бы очень неплохо, если бы контролы сами смотрели в данные и <strong>перестраивались</strong> бы автоматически, если что-нибудь в этих данных поменяется, без кучи явных хендлеров и присвоений значений в контролы по многу раз. </p>
<p>И наоборот -- было бы неплохо, если бы данные <strong>перестраивались</strong> автоматически, если, например, в каком-нибудь input' e пользователь ввел другое значение.</p>
<h4>Вот такой-вот интересный <strong>two-way binding</strong> ¯\<em>(ツ)</em>/¯</h4>
<p>Давайте, человеческим языком -- суть в том, что все данные у нас сложены в одну коробку (массив/объект) и все контролы на странице рендерятся на основе этих данных. </p>
<p>Плюсы здесь в том, что это, мать его, облегчает чтение и уменьшает размер нашего нелюбимого жабаскрипта. А чем меньше жабаскрипта -- тем лучше.</p>
<p>А ещё сразу понятно что приложение делает, если взглянуть на модель данных. А ещё это кодится быстрее за ту же зарплату. Ну вы понимаете.</p>
<h3>Разберем на практике избитый пример:</h3>
<h4>Тудушница</h4>
<p>Давайте за минуту напишем простейший toDo-лист с единым хранением состояния. </p>
<p>Для начала создаём пустое <em>SAPUI5</em> приложение с единственной view -- <em>index.view.xml</em>, которая сразу при открытии будет отображаться пользователю. </p>
<p>Идем от данных! Какие данные примерно должна хранить todo-list? Наверное, массив заметок с полями: checked, text, и id. Ну и содержимое текстового поля, которое генерирует новые заметки. Получилось примерно вот так:</p>
<pre><code class="language-javascript">{
    input: "",
    todos: [
    // Тут будут объекты вот в таком формате:
    //  {
    //  id: "1",
    //  text: "one",
    //  checked: true
    // }
    ]
  }
</code></pre>
<p>Состояние в <em>SAPUI5</em> лучше всего хранить в объекте класса sap.ui.model.json.<strong>JSONModel</strong>. Он позволяет подписываться на изменения каждого из свойства хранимого объекта, как из XML-view в декларативном стиле, так и напрямую писать хендлеры изменений из кода. Почему класс называется именно JSONModel для меня остаётся загадкой, т.к. де-факто он хранит обычный JavaSctipt объект.</p>
<p>Открываем файл <em>/controller/index.controller.js</em> и по событию инициализации создаём <em>JSON-model</em> и заполняем её данными.</p>
<pre><code class="language-javascript">  onInit: function() {
    this.viewState = new JSONModel({
      input: "",
      todos: []
    });

    this.getView().setModel(this.viewState, "viewState");
  }
</code></pre>
<p>Модель присваивается к <em>View</em> с помощью метода <em>.setModel</em>. В данном конкретном случае псевдоним модели ("<em>viewState</em>") можно было не указывать, т.к. модель всего одна и путаницы возникнуть не может. </p>
<p>Давайте попробуем представить, как бы у нас выглядел метод создания новой заметки:</p>
<pre><code class="language-javascript">  appendTodo: function(){
    var todos = this.viewState.getProperty("/todos");
    
    this.viewState.setProperty("/todos", todos.concat([{
      id: new Date().getTime().toString(),
      text: this.viewState.getProperty("/input"),
      checked: false
    }]));
    
    this.viewState.setProperty("/input", "");
  },
</code></pre>
<p>Очень просто. Получение массива заметок, создание массива со старыми + новой заметкой и присвоение его к модели. Затем, очистка поля ввода.</p>
<p>В качестве id нам пока вполне подойдет текущий таймстемп. Вместо Array.prototype.concat, если очень хочется, можно использовать ES6 spread operator:</p>
<pre><code class="language-javascript">  const newArray = [...oldArray, newElement]
</code></pre>
<p>Но не очень нужно, т.к. у sapui5 из коробки нет никакого препроцессинга кода, а написанный энтузиастами плагин для Babel не для production-use. И используя фичи es6 мы автоматически делаем наш код неспособным запуститься на ie10-11 (а у некоторых он до сих пор -- корпоративный стандарт).</p>
<p>Переходим к разметке интерфейса. Там всё просто: поле создания заметок + список.</p>
<pre><code class="language-xml">  &#x3C;content>
    &#x3C;Input value="{viewState>/input}" submit="appendTodo"/>
    &#x3C;List items="{viewState>/todos}">
      &#x3C;items>
        &#x3C;CustomListItem>
          &#x3C;HBox>
            &#x3C;CheckBox selected="{viewState>checked}"/>
            &#x3C;Input width="500px" value="{viewState>text}"/>
            &#x3C;Button text="X" press="deleteTodo" data:id="{viewState>id}"/>
          &#x3C;/HBox>
        &#x3C;/CustomListItem>
      &#x3C;/items>
    &#x3C;/List>
  &#x3C;/content>
</code></pre>
<p>ID заметки будем передавать в data-* аттрибуте. (Чтобы неймспейс data: в разметке заработал, нужно его подключить в самом верху view)</p>
<pre><code class="language-xml">&#x3C;mvc:View 
  controllerName="todoTodo.controller.index" 
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true" 
  xmlns="sap.m" 
  xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
</code></pre>
<p>Метод удаления заметки: Получаем id из data-* аттрибута и фильтруем массив.</p>
<pre><code class="language-javascript">  deleteTodo: function(event){
    var id = event.getSource().data("id");
    var todos = this.viewState.getProperty("/todos");
    this.viewState.setProperty("/todos", todos.filter(function(todo){
      return todo.id !== id;
    }));
  }
</code></pre>
<p>Запускаем -- работает! Написано всего два простых метода. </p>
<p>Сейчас, нам <strong>ничего</strong> не стоит забрать данные и записать в <em>localStorage</em> браузера, или отправить на <em>сервер</em>, или как-то обрабатывать в коде, т.к. мы всегда знаем, где находятся данные и как они организованы.</p>
<p>А теперь, давайте представим, сколько бы нам потребовалось геморроя, если бы мы писали это в классическом html+js... Приходилось бы руками описывать хендлеры событий каждого контрола, а сборка данных для отправки на сервер превратилась бы в сущий ад в виде цикла по всем контроллам и вытаскивания значения. Конечно, для данного примера этот аргумент звучит не слишком сурово. Но представьте здоровенное <em>SPA</em> приложение с несколькими сотнями контроллов в сложной иерархии...</p>
<p>А пока, простейшее туду:</p>
<p><img src="/assets/blog/sapui5-state/basic-todo.png" alt="Запускаем -- работает"></p>
<p>В представленном варианте: в модели <em>viewState</em> будет храниться объект со следующим содержанием:</p>
<pre><code class="language-javascript">{
    input: ""
    todos: {
        { id: "1592739272730", text: "Раз", checked: false }
        { id: "1592739273593", text: "Два", checked: true }
        { id: "1592739274600", text: "Три", checked: false }
        { id: "1592739276362", text: "Четыре", checked: true }
        { id: "1592739277545", text: "Пять", checked: false }
    }
}
</code></pre>
<p><a href="https://github.com/JustAddAcid/sapui5-todo">((Репо с кодом))</a></p>
<p>Продолжение следует.</p>
</div></div></article><article class="mb-32 max-w-2xl mx-auto"><hr class="mb-5"/><h2 class="text-2xl md:text-2xl lg:text-2xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-center">Комментарии</h2><div class="md:flex p-6">Loading...</div><a href="https://github.com/JustAddAcid/JustAddAcid.github.io/issues/10" class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow mt-2 inline-block">Добавить комментарий</a></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Как запилить рективность на SAPUI5 -- часть 1","date":"2020-06-15T14:15:07.322Z","slug":"sapui5-state","author":{"name":"Roman A. Nosov","picture":"/assets/blog/authors/romannosov.png"},"content":"\u003cp\u003eРешил описать то, как можно удобно хранить состояния экранов (или всего приложения) внутри \u003cem\u003eSAPUI5\u003c/em\u003e и делать реактивность (Почти как у больших и нормальных фреймворков).\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eДля тех, кто в танке и никогда не слышал, что это такое:\u003c/strong\u003e \u003cem\u003eSAPUI5\u003c/em\u003e -- это фронтенд-фреймворк. Как  хипстерские \u003cem\u003eVue\u003c/em\u003e и \u003cem\u003eReact\u003c/em\u003e, только никому не нужен. Используется для быстрого написания фронтендов поверх выгрузки данных из SAP-ERP. \u003c/p\u003e\n\u003cp\u003eВнезапно, но он действительно неплохо интегрирован со всей сап-экосистемой и простенькие приложения (внутри опеределенных рамок) писать не сильно больно. Проблемы начинаются тогда, когда нужно сделать что-то \u003cem\u003eбольшее\u003c/em\u003e, чем просто нарисовать табличку с двумя кнопками. И внезапно вылезают всеобщая громоздкость ситаксиса, нестабильность работы некоторых контролов и отсутствие нормального комьюнити.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/blog/sapui5-state/meme.png\" alt=\"Learning programming sapui5\"\u003e\u003c/p\u003e\n\u003ch2\u003eСтейты стейты стейты\u003c/h2\u003e\n\u003ch3\u003eДля начала немного теории\u003c/h3\u003e\n\u003cp\u003eЧто такое реактивное программирование очень хорошо объяснено \u003ca href=\"https://webdevblog.ru/ponimanie-reaktivnosti-vo-vue-js-shag-za-shagom/\"\u003e(здесь)\u003c/a\u003e только примеры для другого фреймворка. Но это не важно! :)\u003c/p\u003e\n\u003cp\u003eВ основе лежит идея о том, что было бы очень неплохо, если бы контролы сами смотрели в данные и \u003cstrong\u003eперестраивались\u003c/strong\u003e бы автоматически, если что-нибудь в этих данных поменяется, без кучи явных хендлеров и присвоений значений в контролы по многу раз. \u003c/p\u003e\n\u003cp\u003eИ наоборот -- было бы неплохо, если бы данные \u003cstrong\u003eперестраивались\u003c/strong\u003e автоматически, если, например, в каком-нибудь input' e пользователь ввел другое значение.\u003c/p\u003e\n\u003ch4\u003eВот такой-вот интересный \u003cstrong\u003etwo-way binding\u003c/strong\u003e ¯\\\u003cem\u003e(ツ)\u003c/em\u003e/¯\u003c/h4\u003e\n\u003cp\u003eДавайте, человеческим языком -- суть в том, что все данные у нас сложены в одну коробку (массив/объект) и все контролы на странице рендерятся на основе этих данных. \u003c/p\u003e\n\u003cp\u003eПлюсы здесь в том, что это, мать его, облегчает чтение и уменьшает размер нашего нелюбимого жабаскрипта. А чем меньше жабаскрипта -- тем лучше.\u003c/p\u003e\n\u003cp\u003eА ещё сразу понятно что приложение делает, если взглянуть на модель данных. А ещё это кодится быстрее за ту же зарплату. Ну вы понимаете.\u003c/p\u003e\n\u003ch3\u003eРазберем на практике избитый пример:\u003c/h3\u003e\n\u003ch4\u003eТудушница\u003c/h4\u003e\n\u003cp\u003eДавайте за минуту напишем простейший toDo-лист с единым хранением состояния. \u003c/p\u003e\n\u003cp\u003eДля начала создаём пустое \u003cem\u003eSAPUI5\u003c/em\u003e приложение с единственной view -- \u003cem\u003eindex.view.xml\u003c/em\u003e, которая сразу при открытии будет отображаться пользователю. \u003c/p\u003e\n\u003cp\u003eИдем от данных! Какие данные примерно должна хранить todo-list? Наверное, массив заметок с полями: checked, text, и id. Ну и содержимое текстового поля, которое генерирует новые заметки. Получилось примерно вот так:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n    input: \"\",\n    todos: [\n    // Тут будут объекты вот в таком формате:\n    //  {\n    //  id: \"1\",\n    //  text: \"one\",\n    //  checked: true\n    // }\n    ]\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eСостояние в \u003cem\u003eSAPUI5\u003c/em\u003e лучше всего хранить в объекте класса sap.ui.model.json.\u003cstrong\u003eJSONModel\u003c/strong\u003e. Он позволяет подписываться на изменения каждого из свойства хранимого объекта, как из XML-view в декларативном стиле, так и напрямую писать хендлеры изменений из кода. Почему класс называется именно JSONModel для меня остаётся загадкой, т.к. де-факто он хранит обычный JavaSctipt объект.\u003c/p\u003e\n\u003cp\u003eОткрываем файл \u003cem\u003e/controller/index.controller.js\u003c/em\u003e и по событию инициализации создаём \u003cem\u003eJSON-model\u003c/em\u003e и заполняем её данными.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e  onInit: function() {\n    this.viewState = new JSONModel({\n      input: \"\",\n      todos: []\n    });\n\n    this.getView().setModel(this.viewState, \"viewState\");\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eМодель присваивается к \u003cem\u003eView\u003c/em\u003e с помощью метода \u003cem\u003e.setModel\u003c/em\u003e. В данном конкретном случае псевдоним модели (\"\u003cem\u003eviewState\u003c/em\u003e\") можно было не указывать, т.к. модель всего одна и путаницы возникнуть не может. \u003c/p\u003e\n\u003cp\u003eДавайте попробуем представить, как бы у нас выглядел метод создания новой заметки:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e  appendTodo: function(){\n    var todos = this.viewState.getProperty(\"/todos\");\n    \n    this.viewState.setProperty(\"/todos\", todos.concat([{\n      id: new Date().getTime().toString(),\n      text: this.viewState.getProperty(\"/input\"),\n      checked: false\n    }]));\n    \n    this.viewState.setProperty(\"/input\", \"\");\n  },\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eОчень просто. Получение массива заметок, создание массива со старыми + новой заметкой и присвоение его к модели. Затем, очистка поля ввода.\u003c/p\u003e\n\u003cp\u003eВ качестве id нам пока вполне подойдет текущий таймстемп. Вместо Array.prototype.concat, если очень хочется, можно использовать ES6 spread operator:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e  const newArray = [...oldArray, newElement]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eНо не очень нужно, т.к. у sapui5 из коробки нет никакого препроцессинга кода, а написанный энтузиастами плагин для Babel не для production-use. И используя фичи es6 мы автоматически делаем наш код неспособным запуститься на ie10-11 (а у некоторых он до сих пор -- корпоративный стандарт).\u003c/p\u003e\n\u003cp\u003eПереходим к разметке интерфейса. Там всё просто: поле создания заметок + список.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-xml\"\u003e  \u0026#x3C;content\u003e\n    \u0026#x3C;Input value=\"{viewState\u003e/input}\" submit=\"appendTodo\"/\u003e\n    \u0026#x3C;List items=\"{viewState\u003e/todos}\"\u003e\n      \u0026#x3C;items\u003e\n        \u0026#x3C;CustomListItem\u003e\n          \u0026#x3C;HBox\u003e\n            \u0026#x3C;CheckBox selected=\"{viewState\u003echecked}\"/\u003e\n            \u0026#x3C;Input width=\"500px\" value=\"{viewState\u003etext}\"/\u003e\n            \u0026#x3C;Button text=\"X\" press=\"deleteTodo\" data:id=\"{viewState\u003eid}\"/\u003e\n          \u0026#x3C;/HBox\u003e\n        \u0026#x3C;/CustomListItem\u003e\n      \u0026#x3C;/items\u003e\n    \u0026#x3C;/List\u003e\n  \u0026#x3C;/content\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eID заметки будем передавать в data-* аттрибуте. (Чтобы неймспейс data: в разметке заработал, нужно его подключить в самом верху view)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-xml\"\u003e\u0026#x3C;mvc:View \n  controllerName=\"todoTodo.controller.index\" \n  xmlns:html=\"http://www.w3.org/1999/xhtml\"\n  xmlns:mvc=\"sap.ui.core.mvc\"\n    displayBlock=\"true\" \n  xmlns=\"sap.m\" \n  xmlns:data=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eМетод удаления заметки: Получаем id из data-* аттрибута и фильтруем массив.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e  deleteTodo: function(event){\n    var id = event.getSource().data(\"id\");\n    var todos = this.viewState.getProperty(\"/todos\");\n    this.viewState.setProperty(\"/todos\", todos.filter(function(todo){\n      return todo.id !== id;\n    }));\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eЗапускаем -- работает! Написано всего два простых метода. \u003c/p\u003e\n\u003cp\u003eСейчас, нам \u003cstrong\u003eничего\u003c/strong\u003e не стоит забрать данные и записать в \u003cem\u003elocalStorage\u003c/em\u003e браузера, или отправить на \u003cem\u003eсервер\u003c/em\u003e, или как-то обрабатывать в коде, т.к. мы всегда знаем, где находятся данные и как они организованы.\u003c/p\u003e\n\u003cp\u003eА теперь, давайте представим, сколько бы нам потребовалось геморроя, если бы мы писали это в классическом html+js... Приходилось бы руками описывать хендлеры событий каждого контрола, а сборка данных для отправки на сервер превратилась бы в сущий ад в виде цикла по всем контроллам и вытаскивания значения. Конечно, для данного примера этот аргумент звучит не слишком сурово. Но представьте здоровенное \u003cem\u003eSPA\u003c/em\u003e приложение с несколькими сотнями контроллов в сложной иерархии...\u003c/p\u003e\n\u003cp\u003eА пока, простейшее туду:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/blog/sapui5-state/basic-todo.png\" alt=\"Запускаем -- работает\"\u003e\u003c/p\u003e\n\u003cp\u003eВ представленном варианте: в модели \u003cem\u003eviewState\u003c/em\u003e будет храниться объект со следующим содержанием:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n    input: \"\"\n    todos: {\n        { id: \"1592739272730\", text: \"Раз\", checked: false }\n        { id: \"1592739273593\", text: \"Два\", checked: true }\n        { id: \"1592739274600\", text: \"Три\", checked: false }\n        { id: \"1592739276362\", text: \"Четыре\", checked: true }\n        { id: \"1592739277545\", text: \"Пять\", checked: false }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/JustAddAcid/sapui5-todo\"\u003e((Репо с кодом))\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eПродолжение следует.\u003c/p\u003e\n","ogImage":{"url":"/assets/blog/sapui5-state/cover.jpg"},"coverImage":"/assets/blog/sapui5-state/cover.jpg","issueId":"10"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"sapui5-state"},"buildId":"vmpHeCl-R7LJ5QG2rZZPZ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-956d2d13be906d60c371.js"></script><script async="" data-next-page="/_app" src="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/pages/_app.js"></script><script async="" data-next-page="/posts/[slug]" src="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/pages/posts/%5Bslug%5D.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="/_next/static/chunks/4f691431.e05b9cac0aab3e16d0b1.js" async=""></script><script src="/_next/static/chunks/commons.34684228d50c6c140f9e.js" async=""></script><script src="/_next/static/runtime/main-54bbc6f5114b2beb7db2.js" async=""></script><script src="/_next/static/chunks/a0bf25f28018c2b2be5f23c259f3c82d2e511923.a375015dfeaf3415b9d5.js" async=""></script><script src="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/_buildManifest.js" async=""></script><script src="/_next/static/vmpHeCl-R7LJ5QG2rZZPZ/_ssgManifest.js" async=""></script></body></html>