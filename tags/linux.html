<!DOCTYPE html><html lang="ru"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Nosoff.info — personal blog"/><title>Nosoff.info #linux</title><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/96d7ee85f27f33c47726.css" as="style"/><link rel="stylesheet" href="/_next/static/css/96d7ee85f27f33c47726.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-d2d57cb239f6bb2b989c.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.dc6404639596772c1856.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-ffab52136f2f93f6cd88.js" as="script"/><link rel="preload" href="/_next/static/chunks/bc82bb883724fe5faad984d18f20974d5cb6d361.96c096a4d39f0f83ca9f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/tags/%5Btag%5D-032cac41ddf1bdd66924.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><section class="flex-col md:flex-row flex items-center md:justify-between mt-16 mb-16 md:mb-12"><h1 class="text-6xl md:text-8xl font-bold tracking-tighter leading-tight md:pr-8">Nosoff.info <!-- -->#linux</h1></section><section><div class="mb-8 md:mb-16"><div class="-mx-5 sm:mx-0"><a aria-label="Авторитарные замашки у проектировщиков интерфейсов TV" href="/posts/authoritarian-tv-interfaces"><img src="/assets/blog/authoritarian-tv-interfaces/background.jpg" alt="Cover Image for Авторитарные замашки у проектировщиков интерфейсов TV" class="shadow-small hover:shadow-medium transition-shadow duration-200"/></a></div></div><div class="md:col-gap-16 lg:col-gap-8 mb-20 md:mb-28"><div><h3 class="screenreader"><a class="hover:underline" href="/posts/authoritarian-tv-interfaces">Авторитарные замашки у проектировщиков интерфейсов TV</a></h3><div class="mb-4 md:mb-0 text-lg"><time dateTime="2020-09-24T13:20:05.316Z">September	24, 2020</time></div></div><div><p class="text-lg leading-relaxed mb-4">Делюсь собственной болью использования LCD-телевизора в качестве монитора на карантине</p><a class="flex items-center" href="https://github.com/JustAddAcid"><img src="https://avatars3.githubusercontent.com/u/21103635?s=120&amp;v=4" class="w-12 h-12 rounded-full mr-4" alt="Roman A. Nosov"/><div class="text-xl font-bold">Roman A. Nosov</div></a></div></div></section><section><h2 class="mb-8 text-6xl md:text-7xl font-bold tracking-tighter leading-tight">More Stories</h2><div class="grid grid-cols-1 md:grid-cols-2 md:col-gap-16 lg:col-gap-32 row-gap-20 md:row-gap-32 mb-32"><div><div class="mb-5"><div class="-mx-5 sm:mx-0"><a aria-label="Организуем удалённое рабочее место на машине с linux" href="/posts/remote-workplace-linux"><img src="/assets/blog/remote-workplace-linux/logo.jpg" alt="Cover Image for Организуем удалённое рабочее место на машине с linux" class="shadow-small hover:shadow-medium transition-shadow duration-200"/></a></div></div><h3 class="screenreader"><a class="hover:underline" href="/posts/remote-workplace-linux">Организуем удалённое рабочее место на машине с linux</a></h3><div class="text-lg mb-4"><time dateTime="2020-06-07T14:15:07.322Z">June	7, 2020</time></div><p class="text-lg leading-relaxed mb-4">На фоне эпидемии появилась необходимость в организации удобной удалённой работы на домашнем компьютере с ос linux на борту: настроить нормальный rdp клиент + skype for business (lync)</p><a class="flex items-center" href="https://github.com/JustAddAcid"><img src="https://avatars3.githubusercontent.com/u/21103635?s=120&amp;v=4" class="w-12 h-12 rounded-full mr-4" alt="Roman A. Nosov"/><div class="text-xl font-bold">Roman A. Nosov</div></a></div></div></section></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"allPosts":[{"title":"Авторитарные замашки у проектировщиков интерфейсов TV","date":"2020-09-24T13:20:05.316Z","slug":"authoritarian-tv-interfaces","author":{"name":"Roman A. Nosov","picture":"https://avatars3.githubusercontent.com/u/21103635?s=120\u0026v=4","url":"https://github.com/JustAddAcid"},"content":"\nМинутка признания. Больше всего в этом мире я ненавижу \"неотключаемые опции\". Есть в этом что-то авторитарное. Когда создатель какой-либо системы играет в бога и заявляет: \"Я просто знаю, что вот эта функция нужна будет всегда. И не отвертитесь! Будете жрать говно до конца!\"\n\nИ такое дерьмо проявляется везде: не только в айтишечке, а даже в обычной жизни! Приведу несколько примеров, чтобы вы поняли, о чем я говорю:\n\n### Интернет в ADSL-эпоху\nВот пришел ты в нулевые года к интернет-провайдеру и говоришь: \"Хочу провести себе тырнет по медному проводу аж **5мб/с**, чтобы смотреть ютуб в 480p и орать с демотиваторов.\"\n\nА тебя заставляют выбирать сразу два тарифа: на интернет и на телефон. Доводы: \"Я не хочу домашний телефон, мне мобилки хватает\" — не работают. И приходится соглашаться с требованиями монополиста — Ростелекома, и платить дополнительный прайс за телефон, которым никто и не воспользовался ни разу. \n\n![Ни единого разрыва](../public/assets/blog/authoritarian-tv-interfaces/without_disconnects.jpg)\n\n### Прекрасное пенсионное и медицинское страхование в рашке\nДля этих штук можно спокойно использовать лозунг \"плати и не пользуйся\". Никого абсолютно не волнует, что человек может просто не дожить до пенсии. Или он самостоятельно хочет накопить себе на старость и не доверяет очень невыгодному вкладу под названием \"пенсионный фонд\", который уже много лет не начисляет проценты. Он просто **не может** отказаться от выплат туда.\n\nС медстраховкой аналогичное дерьмо — ты можешь наблюдаться в частных клиниках за свой счет. **НО** ты **ОБЯЗАН** финансировать безумную и отвратительную систему государственных поликлиник. Зачем? Почему я не могу отказаться выплачивать деньги в фонд, при этом не пользуясь государственной медициной? Потому что какой-то дядька давно решил, что эта опция нужна **всем без исключения** и её нельзя отключить.\n\nИ вот мы подходим к самому главному — юзабилити интерфейсов. И я считаю, что за отсутствие \"выключателя\" у основных функций систем пора уже вводить уголовную ответственность ~~хотя, средневековые развлечения с забиванием камнями тоже подойдут~~ .\n\n## Низкий поклон ребяткам из TOSHIBA\n\nЗадаю вам школьную задачку. **Дано:**\n\n1. Ковидо-карантин, когда закрыты все магазины = 1шт.\n2. Обезьяна, уверенная в том, что она может работать из дома = 1шт.\n3. Ноутбук с экраном 1366x768 = 1шт.\n4. В меру старенький LCD-телевизор TOSHIBA 19AV501 со странным разрешением 1440x900 и возможностью законнектиться по HDMI \n\n![TOSHIBA 19AV501](../public/assets/blog/authoritarian-tv-interfaces/toshiba.jpg)\n\n**Вопрос:** за сколько миллисекунд сгорит стул?\n\n## Суть\n\n![Встал вопрос](../public/assets/blog/authoritarian-tv-interfaces/question.jpg)\n\n~~Во времена моей молодости~~ Когда начался карантин, *встал вопрос* о том, как реализовать своё рабочее место на дому. Мощностью железок я толком не был ограничен, т.к. [подключался по RDP](./remote-workplace-linux) к удалённому компьютеру. Но вот с размером экрана ноутбука у меня возникли проблемы: просто физически не помещались нужные окна на крошечный экран, и постоянно переключаться между окнами было чертовски неудобно. \n\nПоэтому, чтобы хоть как-то сгладить ситуацию, я решил оккупировать ~~Польшу~~ телевизор с кухни и подключить его по *HDMI*. Казалось бы, что может пойти не так в этой ситуации? Берем телевизор, кабель и ноутбук и совмещаем. Но как бы не так! \n\nИменно в момент соития моего ноутбука и телевизора я узнал, ~~откуда взялся оптимус прайм~~ что такое \"неотключаемый оверскан\". **Оверскан** — это когда телевизор увеличивает **всю картинку** на +-5% (при том замыливая), а те куски, которые не влезли на экран — просто отбрасывает, словно их и не было. Т.е. он показывает только середину экрана: без нижней панели с часами и шапок окон сверху.\n\nНаверное, при просмотре каких-то телепередач в этом есть смысл, но при работе за компом це пiздец. А в настройках телевизора нет ничего похожего на отключение этого режима. Совсем ничего. И как с этим жить?\n\n## Поиск информации\n\nВооружившись гуглом и шаманским супер-бубном, я принялся искать инфу об этой проблеме. И что вы думаете? Оказывается, что это говно не связано с конкретной моделью телевизоров. Оверскан у **многих** неотключаемый!\n\nВыходит, это не ошибка разработчиков, а какая-то **устоявшаяся практика**. Я уверен, что существует лобби маньяков-проектировщиков интерфейсов, которые наслаждаются страданиями пользователей по всему миру. Казалось бы, что сложного в добавлении переключателя в меню?\n\n![Маньяки-проектировщики интерфейсов](../public/assets/blog/authoritarian-tv-interfaces/maniac.jpg)\n\n## Попытки решения\n\nСразу после подключения *HDMI* к ноутбуку, телевизор даже не рассказывает о том, что его родное разрешение *1440x900*. И пытается запуститься в дефолтном режиме (1920x1080i).\n\n```bash\n# Ответ xrandr\n\nHDMI-1 connected\n   1920x1080i    50.00 +  60.00    59.94  \n   1280x720      60.00    50.00    59.94  \n   1440x576      50.00  \n   1024x768      75.03    70.07    60.00  \n   1440x480      60.00    59.94  \n   800x600       72.19    75.00    60.32  \n   720x576       50.00  \n   720x576i      50.00  \n   720x480       60.00    59.94  \n   720x480i      60.00    59.94  \n   640x480       75.00    72.81    60.00    59.94  \n\n```\n\nПеребрав все режимы из списка, я увидел, что в режиме 640x480 всё-таки оверскан отключается! То есть, телевизор умеет это делать. Но такое разрешение совсем никуда не годится. Будем копать дальше. \n\nА что будет, если ему насильно объявить родное разрешение?\n\n```bash\ncvt 1440 900 60 # получаем данные для создания режима 1440х900 60 кадров в секунду\n\n\u003e\u003e # 1440x900 59.89 Hz (CVT 1.30MA) hsync: 55.93 kHz; pclk: 106.50 MHz\n\u003e\u003e Modeline \"1440x900_60.00\"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync\n\nxrandr --newmode \"1440x900_60.00\"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync\n\nxrandr --addmode HDMI-1 1440x900_60.00 # Добавляем созданный режим к этому подключению\nxrandr --output HDMI-1 --mode 1440x900_60.00 # Запускаем\n```\n\nИ... Ничего! Оверскан продолжает работать. Также на форумах нашел рекомендацию выключить стриминг аудио по HDMI. Казалось бы, при чем здесь оверскан? Но можно попробовать:\n\n```bash\nxrandr --output HDMI-1 --set audio force-dvi\n```\n\nИ опять никакого эффекта. Ни в максимально близком \"стандартном\" режиме (1280x720), ни в \"родном\" разрешении.\n\n### Но выход есть! \n~~в окно~~\n\nПокопавшись в интернете и почти-разочаровавшись в этом мире, я наткнулся на [совершенно отвлеченный сайт](https://zoom.cnews.ru/goods_card/item/1758052/toshiba-19av501), на котором собраны характеристики этой модельки телевизора.\n\nИ там были две очень интересные строки: (Естественно, этой информации не было в официальной инструкции. Потому что страдай.)\n\n[![Скриншот с сайта](../public/assets/blog/authoritarian-tv-interfaces/screenshot.png)](../public/assets/blog/authoritarian-tv-interfaces/screenshot.png)\n\nТам есть разделение на *\"Поддерживаемые форматы входного сигнала\"* и *\"Доступные разрешения при подключении к ПК\"*. Так чем же они отличаются? \n\nКак выяснилось методом тыка — **именно стримингом звука**. Если отключить звук командой, указанной выше, и выставить разрешение из списка *\"Доступные разрешения при подключении к ПК\"*, то телевизор автоматически переходит в режим \"монитора\" и начинает отображать картинку в том же размере, как она отправляется с компьютера. \n\nНо, ЧСХ, среди этого списка \"доступных\" разрешений **НЕТ родного**. Так что, полностью от мыла **избавиться не удастся**. Но это уже кое-что. Затаив лёгкую злобу на разработчиков, выбираем максимальное разрешение из доступных.\n\nИтоговый скрипт запуска этого монитора в нормальном режиме выглядит следующим образом:\n\n```bash\n#! /bin/bash\n\nxrandr --output HDMI-1 --set audio force-dvi\nxrandr --newmode \"1360x768_60.00\"   84.75  1360 1432 1568 1776  768 771 781 798 -hsync +vsync\nxrandr --addmode HDMI-1 1360x768_60.00\nxrandr --output HDMI-1 --mode 1360x768_60.00\n```\n\nЯ его не стал вешать на автозапуск, т.к. иногда подключаю другие устройства по HDMI, и у них со стандартными настройками всё в порядке. Не хотелось бы ломать с ними связь. Так что, я запускаю скрипт после подключения конкретно этого телевизора. \n\n## Финал\n\nЯ очень рад, что основные проблемы разрешились и телевизор заработал в приемлемом режиме. Но длительных танцев с бубном можно было бы **избежать**, если бы переключение с режима **\"телевизора\"** на режим **\"монитора\"** (без оверскана) происходило нормально в меню телевизора, а не отключением стриминга аудио по HDMI. (Что характерно, на windows его вообще не выключить.)\n\nА отсутствие родного разрешения экрана в списке \"поддерживаемых\" — это вообще отдельная шутка инженеров над пользователями. Но с ней можно мириться. \n\nВсех благ\n\n\u003ciframe frameborder=\"0\" style=\"border:none;width:100%;height:180px;\" width=\"100%\" height=\"180\" src=\"https://music.yandex.ru/iframe/#track/63801314/10183597\"\u003eСлушайте \u003ca href='https://music.yandex.ru/album/10183597/track/63801314'\u003eТоталитаризм\u003c/a\u003e — \u003ca href='https://music.yandex.ru/artist/8896777'\u003e808hardcore\u003c/a\u003e на Яндекс.Музыке\u003c/iframe\u003e\n\n#linux #танцы_с_бубном","ogImage":{"url":"/assets/blog/authoritarian-tv-interfaces/background.jpg"},"coverImage":"/assets/blog/authoritarian-tv-interfaces/background.jpg","issueId":"15","excerpt":"Делюсь собственной болью использования LCD-телевизора в качестве монитора на карантине"},{"title":"Организуем удалённое рабочее место на машине с linux","date":"2020-06-07T14:15:07.322Z","slug":"remote-workplace-linux","author":{"name":"Roman A. Nosov","picture":"https://avatars3.githubusercontent.com/u/21103635?s=120\u0026v=4","url":"https://github.com/JustAddAcid"},"content":"\nНа фоне эпидемии появилась необходимость в организации удобной удалённой работы на домашнем компьютере с ос *linux* на борту: настроить *rdp* клиент + *skype for business* (*lync*).\n\n### Зачем?\n\nНе все работодатели готовы предоставлять работникам именно *VPN* для доступа к корпоративным сервисам. Лишь открывают RDP-терминал. Видимо, так им кажется безопаснее ¯\\\\_(ツ)_/¯. А также, некоторые вещи физически невозможно развернуть на локальных машинах, так что в некоторых ситуациях протокол удалённых рабочих столов просто необходим.\n\n### Как должно работать в идеале:\n\n1. Нужен настроенный *RDP* клиент с поддержкой *gateways* на linux, который по одному клику открывает рабочий стол удалённой машины.\n2. Нужна возможность созваниваться по skype for business с коллегами без огромных задержек от RDP. В идеале — запуск клиента на локальной машине.\n\n## Добываем себе возможность работать в трусах\n![Удалёнка](../public/assets/blog/remote-workplace-linux/meme.jpg)\n\n\n### RDP\nВ качестве rdp клиента будем использовать *freerdp* — это один из немногих linux rdp клиентов, который поддерживает шлюзы (gateways). Устанавливаем:\n\n```bash\nsudo apt instal freerdp\n``` \nТеперь запускать удалённые rdp-сеансы мы можем с помощью консольной команды **xfreerdp**. С определенными параметрами:\n\nСо всеми доступными параметрами можно [познакомиться (здесь)](https://github.com/FreeRDP/FreeRDP/wiki/CommandLineInterface \"CommandLineInterface\"). Но нас интересуют вполне конкретные:\n\n1. **/f** — fullscreen mode\n2. **/multimon** — поддержка нескольких мониторов\n3. **/rfx** — \"расширенный\" протокол поверх RDP. \n4. (опционально) **/sound:sys:alsa** — включение стриминга звука на локальную машину\n5. **+clipboard** — расшаривание буфера обмена между удалённым рабочим столом и клиентской машиной\n6. **+fonts** — включить сглаживание шрифтов. \n7. **/v** — хост url\n8. **/d** — домен пользователя,\n9. **/u** — пользователь\n10. **/p** — пароль пользователя\n11. **/g** — шлюз url\n12. **/gd** — домен для авторизации на шлюзе\n13. **/gu** — пользователь для авторизации на шлюзе\n14. **/gp** — пароль для авторизации на шлюзе\n\nИтоговый скрипт запуска у нас будет следующим:\n\n```bash\n#! /bin/bash\n\nxfreerdp /v:targetUrl /d:domain /u:username /p:password /g:gateway /gd:domain /gu:username /gp:password /f /multimon /rfx /sound:sys:alsa +clipboard +fonts\n```\nВсё это можно сохранить в текстовом файле, сделать его исполняемым и положить для удобства на рабочий стол.\n\n```bash\nsudo chmod +x filename # Сделать исполняемым\n```\n\n### Skype for business (lync)\n\nНесмотря на то, что порт обычной (не бизнесовой) версии скайпа  на линукс официально поставляется разработчиками — бизнесовой версии под linux **нет**. Браузерная версия Skype (*Skype web app*) тоже не заведется, т.к. для его функционирования нужно нативное windows-расширение для браузера. Как быть?\n\nВ этом нам поможет прекрасный плагин для мессенджеров — [SIPE](https://sipe.sourceforge.io/ \"A third-party Pidgin plugin for Microsoft LCS/OCS\"). Он позиционирует себя как open-source имплементация протокола OCS, по которому общаются клиенты *Skype for business*.\n\nУстановим pidgin + sipe\n\n```bash\nsudo apt install pidgin pidgin-sipe\n```\n\nПри создании учетных записей выбираем протокол \"Office Communicator\"\n![Pidgin protocols list](../public/assets/blog/remote-workplace-linux/pidgin-protocols.png)\n\nВводим active directory login/e-mail/пароль. И вуаля! Подключается и работает.\n\nПоскольку, это не официальный клиент, многие (не основные) функции могут отсутствовать. Но базовых более чем хватает:\n\n1. Чат\n2. Звонки, как приватные, так и конференции. \n3. Демонстрация рабочего стола\n4. Совместное использование рабочего стола\n\n#linux #танцы_с_бубном #офисная_боль ","ogImage":{"url":"/assets/blog/remote-workplace-linux/logo.jpg"},"coverImage":"/assets/blog/remote-workplace-linux/logo.jpg","issueId":"9","excerpt":"На фоне эпидемии появилась необходимость в организации удобной удалённой работы на домашнем компьютере с ос linux на борту: настроить нормальный rdp клиент + skype for business (lync)"}],"tag":"linux"},"__N_SSG":true},"page":"/tags/[tag]","query":{"tag":"linux"},"buildId":"5OOKz_x3TsaKuj98miVCK","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-144e5fa6fafab6397d9c.js"></script><script src="/_next/static/chunks/main-d2d57cb239f6bb2b989c.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" async=""></script><script src="/_next/static/chunks/commons.dc6404639596772c1856.js" async=""></script><script src="/_next/static/chunks/pages/_app-ffab52136f2f93f6cd88.js" async=""></script><script src="/_next/static/chunks/bc82bb883724fe5faad984d18f20974d5cb6d361.96c096a4d39f0f83ca9f.js" async=""></script><script src="/_next/static/chunks/pages/tags/%5Btag%5D-032cac41ddf1bdd66924.js" async=""></script><script src="/_next/static/5OOKz_x3TsaKuj98miVCK/_buildManifest.js" async=""></script><script src="/_next/static/5OOKz_x3TsaKuj98miVCK/_ssgManifest.js" async=""></script></body></html>